<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>James Barry OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'VT323', monospace;
            user-select: none; /* Prevents text selection while dragging */
        }

        /* The main desktop background */
        #desktop {
            background-color: #008080;
            height: calc(100vh - 40px);
            overflow: hidden;
            position: relative;
        }

        /* Styling for desktop icons */
        .desktop-icon {
            cursor: pointer;
            text-align: center;
            width: 80px;
            padding: 10px 0;
            margin: 10px;
            border: 2px solid transparent;
            position: absolute; /* Allows for positioning and dragging */
        }

        .desktop-icon:hover {
            background-color: rgba(0, 0, 0, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.5);
        }

        .desktop-icon .icon-image {
            width: 48px;
            height: 48px;
            margin: 0 auto 5px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .desktop-icon .icon-label {
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        /* Window styling */
        .window {
            min-width: 300px;
            min-height: 200px;
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            position: absolute; /* Required for z-index and positioning */
        }

        .window .title-bar {
            background-color: #000080;
            color: white;
            padding: 3px 5px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .window .title-bar-buttons {
            display: flex;
        }

        .window .title-bar-buttons button {
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            font-family: 'VT323', monospace;
            width: 20px;
            height: 20px;
            margin-left: 3px;
            padding-bottom: 2px;
            font-weight: bold;
        }
        .window .title-bar-buttons button:active {
             border-color: #808080 #ffffff #ffffff #808080;
        }

        .window .window-content {
            flex-grow: 1;
            background-color: white;
            padding: 10px;
            margin: 3px;
            overflow-y: auto;
            color: black;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
        }
        
        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            cursor: se-resize;
        }

        /* Taskbar styling */
        #taskbar {
            background-color: #c0c0c0;
            height: 40px;
            width: 100%;
            position: fixed;
            bottom: 0;
            border-top: 2px solid #ffffff;
            display: flex;
            align-items: center;
            padding: 0 5px;
        }

        #start-button {
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 2px 10px;
            font-weight: bold;
        }
        #start-button:active {
            border-color: #808080 #ffffff #ffffff #808080;
        }

        #taskbar-apps {
            flex-grow: 1;
            height: 100%;
        }

        .taskbar-tab {
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            height: 85%;
            margin: 0 2px;
            padding: 0 10px;
            min-width: 100px;
            max-width: 150px;
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
        }

        .taskbar-tab.active {
            border-color: #808080 #ffffff #ffffff #808080;
            background-color: #a0a0a0;
        }

        #clock {
            margin-left: auto;
            border: 2px inset #808080;
            padding: 2px 10px;
        }
    </style>
</head>
<body class="bg-black">

    <div id="desktop">
        <!-- Desktop icons will be created by JavaScript -->
    </div>

    <div id="taskbar">
        <button id="start-button">
            <img src="https://placehold.co/24x24/000080/FFFFFF?text=W" alt="Start" class="inline-block mr-1 h-6">
            Start
        </button>
        <div id="taskbar-apps" class="flex items-center h-full"></div>
        <div id="clock" class="text-right"></div>
    </div>

    <!-- This is a hidden template for creating new windows -->
    <template id="window-template">
        <div class="window">
            <div class="title-bar">
                <span class="title">Window</span>
                <div class="title-bar-buttons">
                    <button class="minimize-btn">_</button>
                    <button class="maximize-btn">[ ]</button>
                    <button class="close-btn">x</button>
                </div>
            </div>
            <div class="window-content">
                <!-- Content goes here -->
            </div>
            <div class="resize-handle"></div>
        </div>
    </template>

    <script>
        const desktop = document.getElementById('desktop');
        const clock = document.getElementById('clock');
        const windowTemplate = document.getElementById('window-template');
        const taskbarApps = document.getElementById('taskbar-apps');

        // --- PORTFOLIO CONTENT ---
        const portfolioContent = {
            'about': {
                title: 'About Me.txt',
                icon: 'https://placehold.co/48x48/ffffff/000000?text=TXT',
                width: 500, height: 250,
                content: `<h2 class="text-2xl font-bold mb-2">James Barry</h2><p>I'm a software developer who loves building creative and useful applications.</p><p class="mt-2">This portfolio is a little project to showcase my skills in a fun, interactive way. Feel free to drag the windows around and explore my experience, education, and projects!</p>`
            },
            'experience': {
                title: 'Experience',
                icon: 'https://placehold.co/48x48/0000FF/FFFFFF?text=EXP',
                width: 650, height: 500,
                content: `<h2 class="text-2xl font-bold mb-2">Professional Experience</h2><div class="mb-4"><h3 class="font-bold text-lg">Software Engineer & Data Scientist Intern</h3><p class="italic">Parsons Corporation & Army Research Lab DSRC</p><p class="text-sm text-gray-600">Aberdeen Proving Ground, MD | Jun 2025 - Aug 2025</p><ul class="list-disc pl-5 mt-1"><li>Built and deployed a scalable evaluation system for semantic similarity algorithms on Army Test Incident Reports (TIRs).</li><li>Improved similarity search precision by over 280% using multi-stage LLM summarization pipelines.</li><li>Cut LLM processing time by 8x by parallelizing TIR analysis across 8-node HPC clusters.</li></ul></div><div class="mb-4"><h3 class="font-bold text-lg">Quantum Machine Learning Researcher</h3><p class="italic">First Year Innovation and Research Experience (FIRE)</p><p class="text-sm text-gray-600">College Park, MD | Jan 2025 - Present</p><ul class="list-disc pl-5 mt-1"><li>Creating a strong foundational understanding of fundamental concepts in quantum computing and machine learning.</li><li>Executing quantum computing software, quantum hardware, and data analysis-centric projects.</li></ul></div><div><h3 class="font-bold text-lg">Logistics and Hardware Organizer</h3><p class="italic">Bitcamp</p><p class="text-sm text-gray-600">College Park, MD | Oct 2024 - May 2025</p><ul class="list-disc pl-5 mt-1"><li>Secured hardware equipment for 1,400+ participants at the University of Maryland's premier hackathon.</li><li>Utilized CAD software to design and build a large collaborative art piece.</li></ul></div>`
            },
            'education': {
                title: 'Education',
                icon: 'https://placehold.co/48x48/800080/FFFFFF?text=EDU',
                width: 550, height: 300,
                content: `<h2 class="text-2xl font-bold mb-2">Education</h2><div><h3 class="font-bold text-lg">University of Maryland</h3><p class="italic">B.S. in Computer Science</p><p class="text-sm text-gray-600">College Park, MD | Aug 2024 - May 2027</p><p class="mt-1"><strong>GPA:</strong> 3.96 / 4.0</p><p class="mt-2"><strong>Relevant Coursework:</strong> Data Structures and Algorithms, Object Oriented Programming I & II, Computer Systems, Operating Systems, Discrete Mathematics, Statistics.</p></div>`
            },
            'skills': {
                title: 'Skills',
                icon: 'https://placehold.co/48x48/FF0000/FFFFFF?text=SKL',
                width: 500, height: 350,
                content: `<h2 class="text-2xl font-bold mb-2">Technical Skills</h2><div class="mb-3"><h3 class="font-bold text-lg">Languages</h3><p>Python, Java, JavaScript, C, MATLAB, R, Shell (PBS/Slurm)</p></div><div class="mb-3"><h3 class="font-bold text-lg">Frameworks & Tools</h3><p>React, Node.js, Git, Ollama, Typescript, HTML/CSS, HPC, Apptainer, ChromaDB</p></div><div><h3 class="font-bold text-lg">Concepts</h3><p>Data Structures, OOP, Containerization, NLP, Prompt Engineering, Vector Embeddings, Parallel Computing, Quantum Machine Learning</p></div>`
            },
            'projects': {
                title: 'Projects',
                icon: 'https://placehold.co/48x48/FFFF00/000000?text=P',
                width: 550, height: 300,
                content: `<h2 class="text-2xl font-bold mb-2">Selected Technical Projects</h2><div class="mb-4"><h3 class="font-bold text-lg">High-Vis Grades for Gradescope</h3><p>A Chrome Extension that automatically calculates and displays course grades on the Gradescope platform. Programmed injection script using JavaScript with DOM manipulation and event listeners.</p></div><div><h3 class="font-bold text-lg">RecipEZ (HopHacks Hackathon)</h3><p>An online recipe database using MongoDB and Auth0 with a web app front-end built with Typescript, React, and Node.js for users with dietary restrictions.</p></div>`
            },
            'contact': {
                title: 'Contact Info',
                icon: 'https://placehold.co/48x48/008000/FFFFFF?text=@',
                width: 450, height: 200,
                content: `<h2 class="text-2xl font-bold mb-2">Get In Touch</h2><p><strong>Email:</strong> <a href="mailto:james.j.barry@icloud.com" class="text-blue-600 underline">james.j.barry@icloud.com</a></p><p><strong>LinkedIn:</strong> <a href="https://linkedin.com/in/James-J-Barry" target="_blank" class="text-blue-600 underline">linkedin.com/in/James-J-Barry</a></p><p><strong>GitHub:</strong> <a href="https://github.com/James-J-Barry" target="_blank" class="text-blue-600 underline">github.com/James-J-Barry</a></p>`
            }
        };

        // --- CORE LOGIC ---
        let highestZIndex = 10;
        const openWindows = {};
        const taskbarTabs = {};
        
        function setActiveWindow(windowEl) {
            if (!windowEl) return;
            Object.values(taskbarTabs).forEach(tab => tab.classList.remove('active'));
            windowEl.style.zIndex = ++highestZIndex;
            const appId = windowEl.dataset.appId;
            if (taskbarTabs[appId]) {
                taskbarTabs[appId].classList.add('active');
            }
        }
        
        function createDesktopIcons() {
            let iconX = 10, iconY = 10;
            const desktopHeight = desktop.clientHeight;
            for (const appId in portfolioContent) {
                const appData = portfolioContent[appId];
                const iconDiv = document.createElement('div');
                iconDiv.className = 'desktop-icon';
                iconDiv.dataset.appId = appId;
                iconDiv.style.left = `${iconX}px`;
                iconDiv.style.top = `${iconY}px`;
                iconDiv.innerHTML = `<div class="icon-image" style="background-image: url('${appData.icon}')"></div><div class="icon-label">${appData.title}</div>`;
                iconDiv.addEventListener('dblclick', () => launchApp(appId));
                makeIconDraggable(iconDiv);
                desktop.appendChild(iconDiv);
                iconY += 110;
                if (iconY + 110 > desktopHeight) {
                    iconY = 10;
                    iconX += 90;
                }
            }
        }

        function launchApp(appId) {
            const windowEl = openWindows[appId];
            if (windowEl) {
                if (windowEl.style.display === 'none') {
                    windowEl.style.display = 'flex';
                }
                setActiveWindow(windowEl);
            } else {
                createWindow(appId);
            }
        }

        function createWindow(appId) {
            const appData = portfolioContent[appId];
            const newWindow = windowTemplate.content.cloneNode(true).firstElementChild;
            newWindow.dataset.appId = appId;
            newWindow.querySelector('.title').textContent = appData.title;
            newWindow.querySelector('.window-content').innerHTML = appData.content;
            newWindow.style.width = `${appData.width || 500}px`;
            newWindow.style.height = `${appData.height || 300}px`;
            newWindow.style.top = `${Math.random() * 50 + 20}px`;
            newWindow.style.left = `${Math.random() * 100 + 50}px`;
            newWindow.querySelector('.close-btn').addEventListener('click', () => {
                delete openWindows[appId];
                newWindow.remove();
                taskbarTabs[appId].classList.remove('active');
            });
            newWindow.querySelector('.minimize-btn').addEventListener('click', () => {
                newWindow.style.display = 'none';
                taskbarTabs[appId].classList.remove('active');
            });
            const maximizeBtn = newWindow.querySelector('.maximize-btn');
            let isMaximized = false;
            let originalState = {};
            maximizeBtn.addEventListener('click', () => {
                if (!isMaximized) {
                    originalState = { width: newWindow.style.width, height: newWindow.style.height, top: newWindow.style.top, left: newWindow.style.left };
                    newWindow.style.width = '100%'; newWindow.style.height = '100%'; newWindow.style.top = '0'; newWindow.style.left = '0';
                    isMaximized = true;
                } else {
                    newWindow.style.width = originalState.width; newWindow.style.height = originalState.height; newWindow.style.top = originalState.top; newWindow.style.left = originalState.left;
                    isMaximized = false;
                }
            });
            makeWindowDraggable(newWindow);
            makeResizable(newWindow);
            newWindow.addEventListener('mousedown', () => setActiveWindow(newWindow), true);
            desktop.appendChild(newWindow);
            openWindows[appId] = newWindow;
            setActiveWindow(newWindow);
        }

        function createTaskbar() {
            for (const appId in portfolioContent) {
                const appData = portfolioContent[appId];
                const tabEl = document.createElement('button');
                tabEl.className = 'taskbar-tab';
                tabEl.textContent = appData.title;
                tabEl.title = appData.title;
                tabEl.addEventListener('click', () => launchApp(appId));
                taskbarApps.appendChild(tabEl);
                taskbarTabs[appId] = tabEl;
            }
        }
        
        // --- REFACTORED DRAG AND RESIZE LOGIC ---
        let activeDrag = null;
        let activeResize = null;

        document.addEventListener('mousemove', (e) => {
            if (activeDrag) {
                e.preventDefault();
                activeDrag.element.style.left = `${e.clientX - activeDrag.offsetX}px`;
                activeDrag.element.style.top = `${e.clientY - activeDrag.offsetY}px`;
            }
            if (activeResize) {
                e.preventDefault();
                const newWidth = activeResize.startWidth + (e.clientX - activeResize.startX);
                const newHeight = activeResize.startHeight + (e.clientY - activeResize.startY);
                if (newWidth > activeResize.element.minWidth) activeResize.element.style.width = `${newWidth}px`;
                if (newHeight > activeResize.element.minHeight) activeResize.element.style.height = `${newHeight}px`;
            }
        });

        document.addEventListener('mouseup', () => {
            if (activeDrag) activeDrag.handle.style.cursor = 'move';
            activeDrag = null;
            activeResize = null;
        });

        function makeWindowDraggable(element) {
            const titleBar = element.querySelector('.title-bar');
            titleBar.addEventListener('mousedown', (e) => {
                if (e.target.tagName === 'BUTTON' || activeResize) return;
                e.preventDefault();
                setActiveWindow(element);
                activeDrag = {
                    element: element,
                    handle: titleBar,
                    offsetX: e.clientX - element.offsetLeft,
                    offsetY: e.clientY - element.offsetTop
                };
                titleBar.style.cursor = 'grabbing';
            });
        }
        
        function makeIconDraggable(element) {
            let moved = false;
            element.addEventListener('mousedown', (e) => {
                e.preventDefault();
                moved = false;
                activeDrag = {
                    element: element,
                    handle: element,
                    offsetX: e.clientX - element.offsetLeft,
                    offsetY: e.clientY - element.offsetTop
                };
            });
            // This prevents dblclick from firing after a drag
            element.addEventListener('mousemove', () => { if(activeDrag?.element === element) moved = true; });
            element.addEventListener('click', (e) => { if(moved) e.stopPropagation(); }, true);
        }

        function makeResizable(element) {
            const resizeHandle = element.querySelector('.resize-handle');
            resizeHandle.addEventListener('mousedown', (e) => {
                e.preventDefault();
                setActiveWindow(element);
                activeResize = {
                    element: element,
                    startX: e.clientX,
                    startY: e.clientY,
                    startWidth: parseInt(document.defaultView.getComputedStyle(element).width, 10),
                    startHeight: parseInt(document.defaultView.getComputedStyle(element).height, 10)
                };
            });
        }

        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            clock.textContent = time;
        }

        // --- INITIALIZATION ---
        setInterval(updateClock, 1000);
        updateClock();
        createDesktopIcons();
        createTaskbar();
    </script>
</body>
</html>

